<!DOCTYPE html>
<html lang="ru">
<head>
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<meta charset="UTF-8">
<title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ü–µ–Ω—ã</title>
<style>
  body {
    font-family: system-ui, sans-serif;
    background: #f4f5f7;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
    box-sizing: border-box;
  }
  .card {
    background: #fff;
    padding: 24px;
    border-radius: 16px;
    width: 100%;
    max-width: 420px;
    box-shadow: 0 12px 30px rgba(0,0,0,.12);
  }
  h1 {
    font-size: 20px;
    margin: 0 0 20px;
    text-align: center;
  }
  label {
    font-size: 13px;
    color: #555;
    display: block;
    margin: 12px 0 4px;
  }
  select, input[type="number"], input[type="text"] {
    width: 100%;
    padding: 9px 12px;
    border-radius: 8px;
    border: 1px solid #d1d5db;
    font-size: 15px;
    box-sizing: border-box;
  }
  .radio-group {
    display: flex;
    gap: 24px;
    margin: 8px 0 16px;
  }
  .radio-group label {
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .hidden {
    display: none !important;
  }
  .result {
    font-size: 26px;
    font-weight: 700;
    margin: 24px 0 12px;
    text-align: center;
    color: #1e40af;
  }
  .note {
    font-size: 12px;
    color: #666;
    text-align: center;
    margin-top: 8px;
  }
  .checkbox label {
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 12px 0;
  }
  button.reset {
    width: 100%;
    padding: 12px;
    margin-top: 20px;
    background: #ef4444;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
  }
  button.reset:hover {
    background: #dc2626;
  }
</style>
</head>
<body>

<div class="card">
  <h1>üí∏ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ü–µ–Ω—ã</h1>

  <label>–ó–∞–∫–∞–∑—á–∏–∫</label>
  <select id="clientType">
    <option value="fiz">–§–∏–∑–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ</option>
    <option value="jur">–Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ</option>
  </select>

  <label>–í–∏–¥ —Ä–∞–±–æ—Ç</label>
  <select id="workType">
    <option value="">‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
    <option value="land">–ó–µ–º–µ–ª—å–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏</option>
    <option value="building">–û–±—ä–µ–∫—Ç—ã –∫–∞–ø–∏—Ç–∞–ª—å–Ω–æ–≥–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞</option>
  </select>

  <div id="serviceBlock" class="hidden">
    <label>–£—Å–ª—É–≥–∞</label>
    <select id="service"></select>
  </div>

  <div id="extraVolumeBlock" class="hidden">
    <label id="extraVolumeLabel">–î–æ–ø. –æ–±—ä—ë–º ‚Äî –±–∞–∑–∞ XX</label>
    <input type="number" id="extraVolume" min="0" value="0">
  </div>

  <div id="extraPlotsBlock" class="hidden">
    <label id="extraPlotsLabel">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—á–∞—Å—Ç–∫–∏</label>
    <input type="number" id="extraPlots" min="0" value="0">
  </div>

  <div id="kmBlock" class="hidden">
    <label>–ö–º (—Ç—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ)</label>
    <input type="number" id="km" min="0" value="0">
  </div>

  <div id="extractsBlock" class="hidden">
    <label>–ù—É–∂–Ω—ã –≤—ã–ø–∏—Å–∫–∏ –ï–ì–†–ù?</label>
    <div class="radio-group">
      <label><input type="radio" name="extracts" value="yes"> –î–∞</label>
      <label><input type="radio" name="extracts" value="no" checked> –ù–µ—Ç</label>
    </div>
    <div id="extractsCountBlock" class="hidden">
      <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–∏—Å–æ–∫</label>
      <input type="number" id="extractsCount" min="1" value="1">
    </div>
  </div>

  <div id="eregBlock" class="hidden">
    <label>–ù—É–∂–Ω–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è?</label>
    <div class="radio-group">
      <label><input type="radio" name="ereg" value="yes"> –î–∞</label>
      <label><input type="radio" name="ereg" value="no" checked> –ù–µ—Ç</label>
    </div>
    <div id="eregCountBlock" class="hidden">
      <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤</label>
      <input type="number" id="eregCount" min="1" value="1">
    </div>
  </div>

  <div id="agreementBlock" class="hidden">
    <label class="checkbox"><input type="checkbox" id="agreement"> –°–æ–≥–ª–∞—à–µ–Ω–∏–µ (+1500 ‚ÇΩ)</label>
  </div>

  <div id="mejPlanBlock" class="hidden">
    <label class="checkbox"><input type="checkbox" id="mejPlan"> –ú–µ–∂–µ–≤–æ–π –ø–ª–∞–Ω (+8000 ‚ÇΩ)</label>
  </div>

  <div id="heatedAreaBlock" class="hidden">
    <label class="checkbox"><input type="checkbox" id="heatedArea"> –°–ø—Ä–∞–≤–∫–∞ –æ–± –æ—Ç–∞–ø–ª–∏–≤–∞–µ–º–æ–π –ø–ª–æ—â–∞–¥–∏ (+1500 ‚ÇΩ)</label>
  </div>

  <div id="execSurveyBlock" class="hidden">
    <label class="checkbox"><input type="checkbox" id="execSurvey"> –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—ä—ë–º–∫–∞ / –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (+30% –∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏)</label>
  </div>

  <div id="notificationBlock" class="hidden">
    <label class="checkbox"><input type="checkbox" id="notification"> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (+5000 ‚ÇΩ)</label>
  </div>

  <label class="checkbox">
    <input type="checkbox" id="legalExtra"> +10% –∑–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ (–Ω–∞ –∏—Ç–æ–≥)
  </label>

  <div class="result">
    –ò—Ç–æ–≥–æ: <span id="total">0</span> ‚ÇΩ
  </div>
  <div class="note">–ì–°–ú: 50 ‚ÇΩ / –∫–º ‚Ä¢ –≤—ã–ø–∏—Å–∫–∞ –ï–ì–†–ù: 500 ‚ÇΩ / —à—Ç ‚Ä¢ —ç–ª. —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: 2000 ‚ÇΩ / –æ–±—ä–µ–∫—Ç</div>

  <button class="reset" onclick="resetForm()">–°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<script>
// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
const GAS_PRICE = 50;
const EXTRACT_PRICE = 500;
const EREG_PRICE = 2000;
const AGREEMENT_PRICE = 1500;
const MEJPLAN_PRICE = 8000;
const HEATED_PRICE = 1500;
const NOTIFICATION_PRICE = 5000;
const LEGAL_EXTRA = 1.10;

// –¶–µ–Ω—ã –¥–ª—è —Ñ–∏–∑ / —é—Ä
const priceList = {
  land: {
    clarification: {
      name: "–ú–µ–∂–µ–≤–æ–π –ø–ª–∞–Ω ‚Äî —É—Ç–æ—á–Ω–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü —É—á–∞—Å—Ç–∫–∞",
      base: { fiz: 10000, jur: 15000 },
      volumeBase: 20, volumeUnit: "—Å–æ—Ç–æ–∫", volumePrice: 150,
      hasExtracts: true, hasEreg: true, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    registration: {
      name: "–ú–µ–∂–µ–≤–æ–π –ø–ª–∞–Ω ‚Äî –¥–ª—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —É—á—ë—Ç",
      base: { fiz: 8000, jur: 8000 },
      volumeBase: 20, volumeUnit: "—Å–æ—Ç–æ–∫", volumePrice: 150,
      hasExtracts: true, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    division: {
      name: "–ú–µ–∂–µ–≤–æ–π –ø–ª–∞–Ω ‚Äî —Ä–∞–∑–¥–µ–ª / –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ / –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ",
      base: { fiz: 10000, jur: 12000 },
      volumeBase: 20, volumeUnit: "—Å–æ—Ç–æ–∫", volumePrice: 150,
      extraPlotsPrice: { fiz: 2500, jur: 6000 },
      hasExtracts: true, hasEreg: true, hasKm: true,
      hasAgreement: true, hasExtraPlots: true
    },
    schemeKPT: {
      name: "–°—Ö–µ–º–∞ –Ω–∞ –ö–ü–¢",
      base: { fiz: 7000, jur: 9000 },
      volumeBase: 20, volumeUnit: "—Å–æ—Ç–æ–∫", volumePrice: 150,
      hasExtracts: true, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    errorCorrection: {
      name: "–ó–∞–∫–ª—é—á–µ–Ω–∏–µ ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–µ—Å—Ç—Ä–æ–≤–æ–π –æ—à–∏–±–∫–∏",
      base: { fiz: 15000, jur: 18000 },
      volumeBase: 20, volumeUnit: "—Å–æ—Ç–æ–∫", volumePrice: 150,
      hasExtracts: true, hasEreg: false, hasKm: true,
      hasMejPlan: true, hasAgreement: false, hasExtraPlots: false
    }
  },
  building: {
    techPlanBuilding: {
      name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω –Ω–∞ –∑–¥–∞–Ω–∏–µ",
      base: { fiz: 10000, jur: 12000 },
      volumeBase: 150, volumeUnit: "–∫–≤.–º", volumePrice: 30,
      hasExtracts: true, hasEreg: true, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    techPlanAttachment: {
      name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω ‚Äî –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ó–£",
      base: { fiz: 9000, jur: 12000 },
      volumeBase: 500, volumeUnit: "–∫–≤.–º", volumePrice: 15,
      volumeThreshold: 10000, volumeDiscountAfterThreshold: 0.5,
      hasExtracts: true, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    techPassport: {
      name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–∞—Å–ø–æ—Ä—Ç –Ω–∞ –∑–¥–∞–Ω–∏–µ",
      base: { fiz: 10000, jur: 12000 },
      volumeBase: 150, volumeUnit: "–∫–≤.–º", volumePrice: 20,
      hasExtracts: false, hasEreg: false, hasKm: true,
      hasHeatedArea: true, hasAgreement: false, hasExtraPlots: false
    },
    techPlanGarage: {
      name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω –Ω–∞ –≥–∞—Ä–∞–∂",
      base: { fiz: 8000, jur: 8000 },
      volumeBase: 20, volumeUnit: "–∫–≤.–º", volumePrice: 15,
      hasExtracts: false, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    techPlanLinear: {
      name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω –Ω–∞ –ª–∏–Ω–µ–π–Ω—ã–π –æ–±—ä–µ–∫—Ç",
      base: { fiz: 12000, jur: 12000 },
      volumeBase: 50, volumeUnit: "–º", volumePrice: 8.5,
      hasExecSurvey: true, hasExtracts: false, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    certificateInBoundaries: {
      name: "–°–ø—Ä–∞–≤–∫–∞ –æ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–∏ –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –ó–£",
      base: { fiz: 3000, jur: 3500 },
      noVolume: true,
      hasExtracts: false, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    certificateMovable: {
      name: "–°–ø—Ä–∞–≤–∫–∞ –¥–≤–∏–∂–∏–º–æ–µ/–Ω–µ–¥–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ",
      base: { fiz: 8000, jur: 8000 },
      noVolume: true,
      hasExtracts: false, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    inspectionNoDemolition: {
      name: "–ê–∫—Ç –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–±–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞ —Å–Ω–æ—Å–∞)",
      base: { fiz: 8000, jur: 8000 },
      noVolume: true,
      hasNotification: true, hasExtracts: false, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    inspectionWithDemolition: {
      name: "–ê–∫—Ç –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (—Å –ø—Ä–æ–µ–∫—Ç–æ–º —Å–Ω–æ—Å–∞)",
      base: { fiz: 30000, jur: 30000 },
      noVolume: true,
      hasExtracts: false, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    conclusionConversion: {
      name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –∑–¥–∞–Ω–∏—è –∏–∑ –Ω–µ–∂–∏–ª–æ–≥–æ –≤ –∂–∏–ª–æ–µ / –∏–∑ –∂–∏–ª–æ–≥–æ –≤ –Ω–µ–∂–∏–ª–æ–µ",
      base: { fiz: 17000, jur: 17000 },
      noVolume: true,
      hasInnerTechPlan: true, hasExtracts: false, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    },
    conclusionDivision: {
      name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ (—Ä–∞–∑–¥–µ–ª –Ω–∞ –±–ª–æ–∫–∏)",
      base: { fiz: 17000, jur: 20000 },
      noVolume: true,
      hasInnerTechPlan: true, hasInnerTechPassport: true,
      hasExtracts: false, hasEreg: false, hasKm: true,
      hasAgreement: false, hasExtraPlots: false
    }
  }
};

// DOM —ç–ª–µ–º–µ–Ω—Ç—ã
const clientTypeSelect = document.getElementById("clientType");
const workTypeSelect = document.getElementById("workType");
const serviceBlock = document.getElementById("serviceBlock");
const serviceSelect = document.getElementById("service");
const extraVolumeBlock = document.getElementById("extraVolumeBlock");
const extraVolumeLabel = document.getElementById("extraVolumeLabel");
const extraVolumeInput = document.getElementById("extraVolume");
const extraPlotsBlock = document.getElementById("extraPlotsBlock");
const extraPlotsInput = document.getElementById("extraPlots");
const kmBlock = document.getElementById("kmBlock");
const kmInput = document.getElementById("km");
const extractsBlock = document.getElementById("extractsBlock");
const extractsRadios = document.getElementsByName("extracts");
const extractsCountBlock = document.getElementById("extractsCountBlock");
const extractsCountInput = document.getElementById("extractsCount");
const eregBlock = document.getElementById("eregBlock");
const eregRadios = document.getElementsByName("ereg");
const eregCountBlock = document.getElementById("eregCountBlock");
const eregCountInput = document.getElementById("eregCount");
const agreementBlock = document.getElementById("agreementBlock");
const agreementCheck = document.getElementById("agreement");
const mejPlanBlock = document.getElementById("mejPlanBlock");
const mejPlanCheck = document.getElementById("mejPlan");
const heatedAreaBlock = document.getElementById("heatedAreaBlock");
const heatedAreaCheck = document.getElementById("heatedArea");
const execSurveyBlock = document.getElementById("execSurveyBlock");
const execSurveyCheck = document.getElementById("execSurvey");
const notificationBlock = document.getElementById("notificationBlock");
const notificationCheck = document.getElementById("notification");
const legalExtraCheck = document.getElementById("legalExtra");
const totalEl = document.getElementById("total");

// –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ª—É–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∏–¥–∞ —Ä–∞–±–æ—Ç
function updateServices() {
  const type = workTypeSelect.value;
  serviceBlock.classList.toggle("hidden", !type);
  serviceSelect.innerHTML = "";

  if (!type) return;

  const list = priceList[type];
  for (const key in list) {
    const opt = document.createElement("option");
    opt.value = key;
    opt.textContent = list[key].name;
    serviceSelect.appendChild(opt);
  }
  updateVisibility();
  calc();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤
function updateVisibility() {
  const type = workTypeSelect.value;
  const key = serviceSelect.value;
  if (!type || !key) {
    hideAll();
    return;
  }

  const s = priceList[type][key];

  // –î–æ–ø. –æ–±—ä—ë–º
  extraVolumeBlock.classList.toggle("hidden", !!s.noVolume);
  if (!s.noVolume) {
    extraVolumeLabel.textContent = `–î–æ–ø. –æ–±—ä—ë–º (${s.volumeUnit}) ‚Äî –±–∞–∑–∞ ${s.volumeBase} ${s.volumeUnit}`;
  }

  // –î–æ–ø. —É—á–∞—Å—Ç–∫–∏
  extraPlotsBlock.classList.toggle("hidden", !s.hasExtraPlots);

  // –ö–º
  kmBlock.classList.toggle("hidden", !s.hasKm);

  // –í—ã–ø–∏—Å–∫–∏
  extractsBlock.classList.toggle("hidden", !s.hasExtracts);
  extractsCountBlock.classList.toggle("hidden", !(s.hasExtracts && extractsRadios[0].checked));

  // –≠–ª. —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  eregBlock.classList.toggle("hidden", !s.hasEreg);
  eregCountBlock.classList.toggle("hidden", !(s.hasEreg && eregRadios[0].checked));

  // –°–æ–≥–ª–∞—à–µ–Ω–∏–µ
  agreementBlock.classList.toggle("hidden", !s.hasAgreement);

  // –ú–µ–∂–µ–≤–æ–π –ø–ª–∞–Ω (–¥–ª—è –æ—à–∏–±–∫–∏)
  mejPlanBlock.classList.toggle("hidden", !s.hasMejPlan);

  // –°–ø—Ä–∞–≤–∫–∞ –æ–± –æ—Ç–∞–ø–ª–∏–≤–∞–µ–º–æ–π –ø–ª–æ—â–∞–¥–∏
  heatedAreaBlock.classList.toggle("hidden", !s.hasHeatedArea);

  // –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—ä—ë–º–∫–∞
  execSurveyBlock.classList.toggle("hidden", !s.hasExecSurvey);

  // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  notificationBlock.classList.toggle("hidden", !s.hasNotification);
}

function hideAll() {
  extraVolumeBlock.classList.add("hidden");
  extraPlotsBlock.classList.add("hidden");
  kmBlock.classList.add("hidden");
  extractsBlock.classList.add("hidden");
  extractsCountBlock.classList.add("hidden");
  eregBlock.classList.add("hidden");
  eregCountBlock.classList.add("hidden");
  agreementBlock.classList.add("hidden");
  mejPlanBlock.classList.add("hidden");
  heatedAreaBlock.classList.add("hidden");
  execSurveyBlock.classList.add("hidden");
  notificationBlock.classList.add("hidden");
}

// –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞
function calc() {
  const type = workTypeSelect.value;
  const key = serviceSelect.value;
  if (!type || !key) {
    totalEl.textContent = "0";
    return;
  }

  const s = priceList[type][key];
  const isJur = clientTypeSelect.value === "jur";

  let total = isJur ? s.base.jur : s.base.fiz;

  // –î–æ–ø. –æ–±—ä—ë–º
  if (!s.noVolume) {
    let vol = Number(extraVolumeInput.value) || 0;
    let volPrice = s.volumePrice;

    // –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –ó–£
    if (s.volumeThreshold && vol > s.volumeThreshold - s.volumeBase) {
      vol -= s.volumeBase; // —Å–≤–µ—Ä—Ö –±–∞–∑—ã
      const normalVol = s.volumeThreshold - s.volumeBase;
      const discountVol = vol - normalVol;
      total += normalVol * volPrice + discountVol * volPrice * s.volumeDiscountAfterThreshold;
    } else {
      total += (vol) * volPrice;
    }
  }

  // –î–æ–ø. —É—á–∞—Å—Ç–∫–∏
  if (s.hasExtraPlots) {
    const extraP = Number(extraPlotsInput.value) || 0;
    const extraPlotsPrice = isJur ? s.extraPlotsPrice.jur : s.extraPlotsPrice.fiz;
    total += extraP * extraPlotsPrice;
  }

  // –ö–º
  if (s.hasKm) {
    const km = Number(kmInput.value) || 0;
    total += km * GAS_PRICE;
  }

  // –í—ã–ø–∏—Å–∫–∏
  if (s.hasExtracts) {
    const needExtracts = extractsRadios[0].checked;
    const extractsCount = needExtracts ? Number(extractsCountInput.value) || 1 : 0;
    total += extractsCount * EXTRACT_PRICE;
  }

  // –≠–ª. —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  if (s.hasEreg) {
    const needEreg = eregRadios[0].checked;
    const eregCount = needEreg ? Number(eregCountInput.value) || 1 : 0;
    total += eregCount * EREG_PRICE;
  }

  // –°–æ–≥–ª–∞—à–µ–Ω–∏–µ
  if (s.hasAgreement && agreementCheck.checked) total += AGREEMENT_PRICE;

  // –ú–µ–∂–µ–≤–æ–π –ø–ª–∞–Ω
  if (s.hasMejPlan && mejPlanCheck.checked) total += MEJPLAN_PRICE;

  // –û—Ç–∞–ø–ª–∏–≤–∞–µ–º–∞—è –ø–ª–æ—â–∞–¥—å
  if (s.hasHeatedArea && heatedAreaCheck.checked) total += HEATED_PRICE;

  // –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—ä—ë–º–∫–∞ (+30%)
  if (s.hasExecSurvey && execSurveyCheck.checked) total *= 1.30;

  // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  if (s.hasNotification && notificationCheck.checked) total += NOTIFICATION_PRICE;

  // +10% –∑–∞ —é—Ä.–ª–∏—Ü–æ (–ø–æ—Å–ª–µ–¥–Ω–∏–º!)
  if (legalExtraCheck.checked) total *= LEGAL_EXTRA;

  totalEl.textContent = Math.round(total).toLocaleString('ru-RU');
}

function resetForm() {
  clientTypeSelect.value = "fiz";
  workTypeSelect.value = "";
  serviceSelect.innerHTML = "";
  extraVolumeInput.value = 0;
  extraPlotsInput.value = 0;
  kmInput.value = 0;
  extractsRadios[1].checked = true;
  extractsCountInput.value = 1;
  eregRadios[1].checked = true;
  eregCountInput.value = 1;
  agreementCheck.checked = false;
  mejPlanCheck.checked = false;
  heatedAreaCheck.checked = false;
  execSurveyCheck.checked = false;
  notificationCheck.checked = false;
  legalExtraCheck.checked = false;
  hideAll();
  calc();
}

// –°–æ–±—ã—Ç–∏—è
clientTypeSelect.addEventListener("change", calc);
workTypeSelect.addEventListener("change", updateServices);
serviceSelect.addEventListener("change", () => { updateVisibility(); calc(); });
document.querySelectorAll("input").forEach(el => {
  el.addEventListener("input", () => { updateVisibility(); calc(); });
  el.addEventListener("change", () => { updateVisibility(); calc(); });
});

// –°—Ç–∞—Ä—Ç
resetForm();
</script>
</body>
</html>
